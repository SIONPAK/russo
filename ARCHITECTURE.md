# ë£¨ì†Œ ë„ë§¤ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë¬¸ì„œ

ì´ ë¬¸ì„œëŠ” ë£¨ì†Œ ë„ë§¤ ì‹œìŠ¤í…œì˜ ì „ì²´ ì•„í‚¤í…ì²˜ì™€ ì„¤ê³„ ì›ì¹™ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

## ğŸ“‹ ëª©ì°¨

1. [ì‹œìŠ¤í…œ ê°œìš”](#ì‹œìŠ¤í…œ-ê°œìš”)
2. [ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨](#ì•„í‚¤í…ì²˜-ë‹¤ì´ì–´ê·¸ë¨)
3. [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
4. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
5. [API ì„¤ê³„](#api-ì„¤ê³„)
6. [ì¸ì¦ ë° ë³´ì•ˆ](#ì¸ì¦-ë°-ë³´ì•ˆ)
7. [ì¬ê³  ê´€ë¦¬ ì‹œìŠ¤í…œ](#ì¬ê³ -ê´€ë¦¬-ì‹œìŠ¤í…œ)
8. [ë°°í¬ ì•„í‚¤í…ì²˜](#ë°°í¬-ì•„í‚¤í…ì²˜)
9. [ì„±ëŠ¥ ìµœì í™”](#ì„±ëŠ¥-ìµœì í™”)
10. [ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…](#ëª¨ë‹ˆí„°ë§-ë°-ë¡œê¹…)

## ğŸ— ì‹œìŠ¤í…œ ê°œìš”

### ë¹„ì¦ˆë‹ˆìŠ¤ ë„ë©”ì¸

ë£¨ì†Œ ë„ë§¤ ì‹œìŠ¤í…œì€ ë„ë§¤ë²•ì¸ì„ ìœ„í•œ í†µí•© ERP ì‹œìŠ¤í…œìœ¼ë¡œ, ë‹¤ìŒê³¼ ê°™ì€ í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ì˜ì—­ì„ ë‹¤ë£¹ë‹ˆë‹¤:

- **ê³ ê° ê´€ë¦¬**: ë„ë§¤ ê³ ê°ì˜ ìŠ¹ì¸, ê´€ë¦¬, ë“±ê¸‰ ì‹œìŠ¤í…œ
- **ìƒí’ˆ ê´€ë¦¬**: ìƒí’ˆ ë“±ë¡, ì¹´í…Œê³ ë¦¬ ê´€ë¦¬, ê°€ê²© ì •ì±…
- **ì¬ê³  ê´€ë¦¬**: ì‹¤ì‹œê°„ ì¬ê³  ì¶”ì , ì…ê³ /ì¶œê³ , ADU ë¶„ì„
- **ì£¼ë¬¸ ê´€ë¦¬**: ì£¼ë¬¸ ì²˜ë¦¬, ì‹œê°„ìˆœ í• ë‹¹, ì¶œê³  ê´€ë¦¬
- **ë§ˆì¼ë¦¬ì§€ ì‹œìŠ¤í…œ**: ì ë¦½/ì°¨ê°, ëª…ì„¸ì„œ ê´€ë¦¬
- **ìƒ˜í”Œ ê´€ë¦¬**: ë¬´ë£Œ ìƒ˜í”Œ ì£¼ë¬¸ ë° ë°˜ë‚© ê´€ë¦¬

### ì‹œìŠ¤í…œ íŠ¹ì§•

- **ì‹¤ì‹œê°„ ì²˜ë¦¬**: ì¬ê³  ë³€ë™, ì£¼ë¬¸ ìƒíƒœ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
- **ìë™í™”**: ì¬ê³  í• ë‹¹, ë§ˆì¼ë¦¬ì§€ ì ë¦½, ì¼ì¼ ì´ì›” ì²˜ë¦¬
- **í™•ì¥ì„±**: ëª¨ë“ˆí™”ëœ êµ¬ì¡°ë¡œ ê¸°ëŠ¥ í™•ì¥ ìš©ì´
- **ë³´ì•ˆ**: ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´, ë°ì´í„° ì•”í˜¸í™”

## ğŸ¨ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

### ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

```mermaid
graph TB
    subgraph "Client Layer"
        A[Web Browser]
        B[Mobile Browser]
    end

    subgraph "CDN & Edge"
        C[Vercel Edge Network]
    end

    subgraph "Application Layer"
        D[Next.js App Router]
        E[API Routes]
        F[Middleware]
    end

    subgraph "Business Logic Layer"
        G[Feature Modules]
        H[Entity Services]
        I[Shared Utilities]
    end

    subgraph "Data Layer"
        J[Supabase Database]
        K[Supabase Storage]
        L[Supabase Auth]
    end

    subgraph "External Services"
        M[CJëŒ€í•œí†µìš´ API]
        N[ë±…í¬ë‹¤ API]
        O[ì´ë©”ì¼ ì„œë¹„ìŠ¤]
    end

    A --> C
    B --> C
    C --> D
    D --> E
    E --> F
    F --> G
    G --> H
    H --> I
    I --> J
    I --> K
    I --> L
    E --> M
    E --> N
    E --> O
```

### ì»´í¬ë„ŒíŠ¸ ì•„í‚¤í…ì²˜

```mermaid
graph LR
    subgraph "Frontend (Next.js)"
        A[Pages]
        B[Components]
        C[Hooks]
        D[Stores]
    end

    subgraph "Backend (API Routes)"
        E[Route Handlers]
        F[Middleware]
        G[Business Logic]
    end

    subgraph "Database (Supabase)"
        H[PostgreSQL]
        I[Real-time]
        J[Storage]
        K[Auth]
    end

    A --> B
    B --> C
    C --> D
    A --> E
    E --> F
    F --> G
    G --> H
    G --> I
    G --> J
    G --> K
```

## ğŸ›  ê¸°ìˆ  ìŠ¤íƒ

### Frontend Stack

| ê¸°ìˆ             | ë²„ì „    | ìš©ë„                      |
| --------------- | ------- | ------------------------- |
| Next.js         | 15.3.4  | React í”„ë ˆì„ì›Œí¬, SSR/SSG |
| React           | 19.0.0  | UI ë¼ì´ë¸ŒëŸ¬ë¦¬             |
| TypeScript      | 5.x     | íƒ€ì… ì•ˆì „ì„±               |
| Tailwind CSS    | 4.x     | ìŠ¤íƒ€ì¼ë§                  |
| Zustand         | 5.0.5   | ìƒíƒœ ê´€ë¦¬                 |
| React Hook Form | 7.59.0  | í¼ ê´€ë¦¬                   |
| Lucide React    | 0.523.0 | ì•„ì´ì½˜                    |

### Backend Stack

| ê¸°ìˆ                | ë²„ì „   | ìš©ë„                         |
| ------------------ | ------ | ---------------------------- |
| Next.js API Routes | 15.3.4 | ì„œë²„ë¦¬ìŠ¤ API                 |
| Supabase           | 2.50.2 | ë°ì´í„°ë² ì´ìŠ¤, ì¸ì¦, ìŠ¤í† ë¦¬ì§€ |
| PostgreSQL         | 15+    | ê´€ê³„í˜• ë°ì´í„°ë² ì´ìŠ¤          |
| Node.js            | 18+    | ëŸ°íƒ€ì„ í™˜ê²½                  |

### ê°œë°œ ë„êµ¬

| ê¸°ìˆ        | ë²„ì „  | ìš©ë„        |
| ---------- | ----- | ----------- |
| ESLint     | 9.x   | ì½”ë“œ ë¦°íŒ…   |
| Prettier   | -     | ì½”ë“œ í¬ë§·íŒ… |
| TypeScript | 5.x   | íƒ€ì… ì²´í‚¹   |
| Yarn       | 1.22+ | íŒ¨í‚¤ì§€ ê´€ë¦¬ |

### ë°°í¬ ë° ì¸í”„ë¼

| ê¸°ìˆ      | ë²„ì „ | ìš©ë„                |
| -------- | ---- | ------------------- |
| Vercel   | -    | í˜¸ìŠ¤íŒ…, CDN, ë°°í¬   |
| Supabase | -    | ë°ì´í„°ë² ì´ìŠ¤ í˜¸ìŠ¤íŒ… |
| GitHub   | -    | ë²„ì „ ê´€ë¦¬, CI/CD    |

## ğŸ—„ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### í•µì‹¬ í…Œì´ë¸” êµ¬ì¡°

#### ì‚¬ìš©ì ê´€ë ¨

```sql
-- ì‚¬ìš©ì í…Œì´ë¸”
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  email VARCHAR(255) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  company_name VARCHAR(255) NOT NULL,
  business_number VARCHAR(20) UNIQUE NOT NULL,
  representative_name VARCHAR(100) NOT NULL,
  phone VARCHAR(20) NOT NULL,
  address TEXT NOT NULL,
  postal_code VARCHAR(10) NOT NULL,
  recipient_name VARCHAR(100) NOT NULL,
  recipient_phone VARCHAR(20) NOT NULL,
  business_license TEXT,
  approval_status VARCHAR(20) DEFAULT 'pending',
  is_active BOOLEAN DEFAULT true,
  mileage_balance INTEGER DEFAULT 0,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ê´€ë¦¬ì í…Œì´ë¸”
CREATE TABLE admins (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  username VARCHAR(50) UNIQUE NOT NULL,
  email VARCHAR(255) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  role VARCHAR(20) DEFAULT 'admin',
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

#### ìƒí’ˆ ê´€ë ¨

```sql
-- ìƒí’ˆ í…Œì´ë¸”
CREATE TABLE products (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(255) NOT NULL,
  code VARCHAR(50) UNIQUE NOT NULL,
  description TEXT,
  detailed_description TEXT,
  category_id UUID REFERENCES categories(id),
  price DECIMAL(10,2) NOT NULL,
  sale_price DECIMAL(10,2),
  is_on_sale BOOLEAN DEFAULT false,
  is_featured BOOLEAN DEFAULT false,
  is_active BOOLEAN DEFAULT true,
  stock_quantity INTEGER DEFAULT 0,
  inventory_options JSONB,
  unit VARCHAR(20) DEFAULT 'ê°œ',
  images JSONB DEFAULT '[]',
  main_image_id UUID,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ì¹´í…Œê³ ë¦¬ í…Œì´ë¸”
CREATE TABLE categories (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(100) NOT NULL,
  slug VARCHAR(100) UNIQUE NOT NULL,
  description TEXT,
  parent_id UUID REFERENCES categories(id),
  order_index INTEGER DEFAULT 0,
  is_active BOOLEAN DEFAULT true,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

#### ì£¼ë¬¸ ê´€ë ¨

```sql
-- ì£¼ë¬¸ í…Œì´ë¸”
CREATE TABLE orders (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id) NOT NULL,
  order_number VARCHAR(50) UNIQUE NOT NULL,
  order_type VARCHAR(20) DEFAULT 'normal',
  total_amount DECIMAL(12,2) NOT NULL,
  shipping_fee DECIMAL(10,2) DEFAULT 0,
  status VARCHAR(20) DEFAULT 'pending',
  working_date DATE NOT NULL,
  shipping_name VARCHAR(100) NOT NULL,
  shipping_phone VARCHAR(20) NOT NULL,
  shipping_address TEXT NOT NULL,
  shipping_postal_code VARCHAR(10) NOT NULL,
  notes TEXT,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ì£¼ë¬¸ ì•„ì´í…œ í…Œì´ë¸”
CREATE TABLE order_items (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  order_id UUID REFERENCES orders(id) NOT NULL,
  product_id UUID REFERENCES products(id) NOT NULL,
  product_name VARCHAR(255) NOT NULL,
  color VARCHAR(50),
  size VARCHAR(50),
  quantity INTEGER NOT NULL,
  unit_price DECIMAL(10,2) NOT NULL,
  total_price DECIMAL(12,2) NOT NULL,
  allocated_quantity INTEGER DEFAULT 0,
  shipped_quantity INTEGER DEFAULT 0,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

#### ì¬ê³  ê´€ë ¨

```sql
-- ì¬ê³  ë³€ë™ ì´ë ¥ í…Œì´ë¸”
CREATE TABLE stock_movements (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  product_id UUID REFERENCES products(id) NOT NULL,
  movement_type VARCHAR(50) NOT NULL,
  quantity INTEGER NOT NULL,
  color VARCHAR(50),
  size VARCHAR(50),
  notes TEXT,
  reference_id UUID,
  reference_type VARCHAR(50),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

### ë°ì´í„°ë² ì´ìŠ¤ í•¨ìˆ˜

#### ì¬ê³  ê´€ë¦¬ í•¨ìˆ˜

```sql
-- ë¬¼ë¦¬ì  ì¬ê³  ì¶”ê°€/ì°¨ê°
CREATE OR REPLACE FUNCTION add_physical_stock(
  p_product_id uuid,
  p_color varchar DEFAULT NULL,
  p_size varchar DEFAULT NULL,
  p_additional_stock integer DEFAULT 0,
  p_reason text DEFAULT ''
) RETURNS boolean;

-- ì¬ê³  í• ë‹¹
CREATE OR REPLACE FUNCTION allocate_stock(
  p_product_id uuid,
  p_quantity integer,
  p_color varchar DEFAULT NULL,
  p_size varchar DEFAULT NULL
) RETURNS boolean;

-- ê°€ìš©ì¬ê³  ê³„ì‚°
CREATE OR REPLACE FUNCTION calculate_available_stock(
  p_product_id uuid,
  p_color varchar DEFAULT NULL,
  p_size varchar DEFAULT NULL
) RETURNS integer;
```

## ğŸ”Œ API ì„¤ê³„

### RESTful API êµ¬ì¡°

#### API ì—”ë“œí¬ì¸íŠ¸ íŒ¨í„´

```
/api/{domain}/{resource}/{action}
```

#### ë„ë©”ì¸ë³„ API êµ¬ì¡°

##### ì¸ì¦ API

```
POST /api/auth/login          # ë¡œê·¸ì¸
POST /api/auth/register       # íšŒì›ê°€ì…
POST /api/auth/logout         # ë¡œê·¸ì•„ì›ƒ
POST /api/auth/refresh        # í† í° ê°±ì‹ 
```

##### ê´€ë¦¬ì API

```
GET    /api/admin/users                    # ì‚¬ìš©ì ëª©ë¡
POST   /api/admin/users                    # ì‚¬ìš©ì ìƒì„±
GET    /api/admin/users/[id]               # ì‚¬ìš©ì ìƒì„¸
PUT    /api/admin/users/[id]               # ì‚¬ìš©ì ìˆ˜ì •
DELETE /api/admin/users/[id]               # ì‚¬ìš©ì ì‚­ì œ
POST   /api/admin/users/[id]/approve       # ì‚¬ìš©ì ìŠ¹ì¸

GET    /api/admin/orders                   # ì£¼ë¬¸ ëª©ë¡
POST   /api/admin/orders/allocate-inventory # ì¬ê³  í• ë‹¹
GET    /api/admin/inventory                # ì¬ê³  í˜„í™©
POST   /api/admin/inventory/upload         # ì¬ê³  ì—…ë¡œë“œ
```

##### ì£¼ë¬¸ API

```
POST /api/orders                # ì£¼ë¬¸ ìƒì„±
POST /api/orders/purchase       # ë°œì£¼ì„œ ìƒì„±
POST /api/orders/sample         # ìƒ˜í”Œ ì£¼ë¬¸
GET  /api/orders/[id]           # ì£¼ë¬¸ ìƒì„¸
PUT  /api/orders/[id]           # ì£¼ë¬¸ ìˆ˜ì •
```

### API ì‘ë‹µ í˜•ì‹

#### ì„±ê³µ ì‘ë‹µ

```typescript
{
  success: true,
  data: any,
  message?: string,
  pagination?: {
    page: number,
    limit: number,
    total: number,
    totalPages: number
  }
}
```

#### ì—ëŸ¬ ì‘ë‹µ

```typescript
{
  success: false,
  error: string,
  details?: any
}
```

### API ë³´ì•ˆ

#### ì¸ì¦ ë°©ì‹

- **ê´€ë¦¬ì**: JWT í† í° ê¸°ë°˜ ì¸ì¦
- **ì‚¬ìš©ì**: Supabase Auth ê¸°ë°˜ ì¸ì¦

#### ê¶Œí•œ ì œì–´

```typescript
// ë¯¸ë“¤ì›¨ì–´ì—ì„œ ê¶Œí•œ í™•ì¸
export async function requireAdmin(request: NextRequest) {
  const token = request.cookies.get("admin-token")?.value;

  if (!token) {
    throw new Error("ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.");
  }

  const admin = await verifyAdminToken(token);
  if (!admin) {
    throw new Error("ìœ íš¨í•˜ì§€ ì•Šì€ í† í°ì…ë‹ˆë‹¤.");
  }

  return admin;
}
```

## ğŸ” ì¸ì¦ ë° ë³´ì•ˆ

### ì¸ì¦ ì•„í‚¤í…ì²˜

```mermaid
sequenceDiagram
    participant C as Client
    participant A as API
    participant S as Supabase
    participant D as Database

    C->>A: ë¡œê·¸ì¸ ìš”ì²­
    A->>S: ì¸ì¦ ìš”ì²­
    S->>D: ì‚¬ìš©ì í™•ì¸
    D-->>S: ì‚¬ìš©ì ì •ë³´
    S-->>A: JWT í† í°
    A-->>C: í† í° ë°˜í™˜

    C->>A: API ìš”ì²­ (í† í° í¬í•¨)
    A->>A: í† í° ê²€ì¦
    A->>D: ë°ì´í„° ì¡°íšŒ
    D-->>A: ë°ì´í„° ë°˜í™˜
    A-->>C: ì‘ë‹µ
```

### ë³´ì•ˆ ì •ì±…

#### ë°ì´í„° ì•”í˜¸í™”

- **ì „ì†¡ ì¤‘**: HTTPS/TLS 1.3
- **ì €ì¥ ì‹œ**: Supabase ì•”í˜¸í™”
- **ë¹„ë°€ë²ˆí˜¸**: bcrypt í•´ì‹±

#### ì ‘ê·¼ ì œì–´

- **RLS (Row Level Security)**: ë°ì´í„°ë² ì´ìŠ¤ ë ˆë²¨ ë³´ì•ˆ
- **API ë ˆë²¨**: ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´
- **í´ë¼ì´ì–¸íŠ¸ ë ˆë²¨**: ì»´í¬ë„ŒíŠ¸ë³„ ê¶Œí•œ í™•ì¸

## ğŸ“¦ ì¬ê³  ê´€ë¦¬ ì‹œìŠ¤í…œ

### ì´ì¤‘ ì¬ê³  êµ¬ì¡°

```typescript
interface InventoryOption {
  color: string;
  size: string;
  physical_stock: number; // ì‹¤ì œ ë¬¼ë¦¬ì  ì¬ê³ 
  allocated_stock: number; // í• ë‹¹ëœ ì¬ê³  (ì£¼ë¬¸ì— ì˜ˆì•½ëœ ì¬ê³ )
  stock_quantity: number; // ê°€ìš©ì¬ê³  (physical_stock - allocated_stock)
}
```

### ì¬ê³  í• ë‹¹ í”Œë¡œìš°

```mermaid
sequenceDiagram
    participant O as Order
    participant A as API
    participant S as Stock System
    participant D as Database

    O->>A: ì£¼ë¬¸ ìƒì„± ìš”ì²­
    A->>S: ê°€ìš©ì¬ê³  í™•ì¸
    S->>D: calculate_available_stock()
    D-->>S: ê°€ìš©ì¬ê³  ë°˜í™˜
    S-->>A: ì¬ê³  í™•ì¸ ê²°ê³¼

    alt ì¬ê³  ì¶©ë¶„
        A->>S: ì¬ê³  í• ë‹¹
        S->>D: allocate_stock()
        D-->>S: í• ë‹¹ ì™„ë£Œ
        S-->>A: í• ë‹¹ ì„±ê³µ
        A-->>O: ì£¼ë¬¸ ìƒì„± ì™„ë£Œ
    else ì¬ê³  ë¶€ì¡±
        A-->>O: ì¬ê³  ë¶€ì¡± ì˜¤ë¥˜
    end
```

### Working Date ì‹œìŠ¤í…œ

#### ì‹œê°„ ê¸°ì¤€ ë¡œì§

```typescript
function calculateWorkingDate(): string {
  const now = new Date();
  const koreaTime = new Date(
    now.toLocaleString("en-US", { timeZone: "Asia/Seoul" })
  );
  let workingDate = new Date(koreaTime);
  const originalDayOfWeek = koreaTime.getDay();

  // 15ì‹œ ì´í›„ë©´ ë‹¤ìŒë‚ ë¡œ ì„¤ì •
  if (koreaTime.getHours() >= 15) {
    workingDate.setDate(workingDate.getDate() + 1);
  }

  // ì£¼ë§ ì²˜ë¦¬
  if (originalDayOfWeek === 6) {
    // í† ìš”ì¼
    workingDate.setDate(workingDate.getDate() + 2);
  } else if (originalDayOfWeek === 0) {
    // ì¼ìš”ì¼
    workingDate.setDate(workingDate.getDate() + 1);
  } else if (originalDayOfWeek === 5 && koreaTime.getHours() >= 15) {
    // ê¸ˆìš”ì¼ 15ì‹œ ì´í›„
    workingDate.setDate(workingDate.getDate() + 2);
  }

  return workingDate.toISOString().split("T")[0];
}
```

## ğŸš€ ë°°í¬ ì•„í‚¤í…ì²˜

### Vercel ë°°í¬ êµ¬ì¡°

```mermaid
graph TB
    subgraph "Vercel Platform"
        A[Edge Network]
        B[Serverless Functions]
        C[Static Assets]
    end

    subgraph "Supabase"
        D[PostgreSQL]
        E[Auth]
        F[Storage]
        G[Real-time]
    end

    subgraph "External APIs"
        H[CJëŒ€í•œí†µìš´]
        I[ë±…í¬ë‹¤]
        J[ì´ë©”ì¼ ì„œë¹„ìŠ¤]
    end

    A --> B
    B --> D
    B --> E
    B --> F
    B --> G
    B --> H
    B --> I
    B --> J
    A --> C
```

### CI/CD íŒŒì´í”„ë¼ì¸

```mermaid
graph LR
    A[Git Push] --> B[GitHub Actions]
    B --> C[í…ŒìŠ¤íŠ¸ ì‹¤í–‰]
    C --> D[ë¹Œë“œ]
    D --> E[Vercel ë°°í¬]
    E --> F[í”„ë¡œë•ì…˜]

    B --> G[í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨]
    G --> H[ë°°í¬ ì¤‘ë‹¨]
```

### í™˜ê²½ ê´€ë¦¬

#### í™˜ê²½ë³„ ì„¤ì •

- **Development**: ë¡œì»¬ ê°œë°œ í™˜ê²½
- **Preview**: PRë³„ ë¯¸ë¦¬ë³´ê¸° í™˜ê²½
- **Production**: ìš´ì˜ í™˜ê²½

#### í™˜ê²½ ë³€ìˆ˜ ê´€ë¦¬

```bash
# ê°œë°œ í™˜ê²½
NEXT_PUBLIC_SUPABASE_URL=dev_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=dev_key

# ìš´ì˜ í™˜ê²½
NEXT_PUBLIC_SUPABASE_URL=prod_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=prod_key
```

## âš¡ ì„±ëŠ¥ ìµœì í™”

### í”„ë¡ íŠ¸ì—”ë“œ ìµœì í™”

#### ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…

```typescript
// ë™ì  ì„í¬íŠ¸
const UserManagement = dynamic(() => import("./UserManagement"), {
  loading: () => <div>ë¡œë”© ì¤‘...</div>,
  ssr: false,
});
```

#### ì´ë¯¸ì§€ ìµœì í™”

```typescript
import Image from "next/image";

<Image
  src="/images/product.jpg"
  alt="ìƒí’ˆ ì´ë¯¸ì§€"
  width={300}
  height={300}
  priority={isAboveFold}
  placeholder="blur"
  sizes="(max-width: 768px) 100vw, 50vw"
/>;
```

#### ìƒíƒœ ê´€ë¦¬ ìµœì í™”

```typescript
// Zustand ìŠ¤í† ì–´ ìµœì í™”
const useUserStore = create<UserStore>((set, get) => ({
  users: [],
  isLoading: false,

  // ë©”ëª¨ì´ì œì´ì…˜ëœ ì…€ë ‰í„°
  getApprovedUsers: () => {
    const { users } = get();
    return users.filter((user) => user.approval_status === "approved");
  },

  // ì•¡ì…˜ ìµœì í™”
  setUsers: (users) => set({ users }),
  setLoading: (isLoading) => set({ isLoading }),
}));
```

### ë°±ì—”ë“œ ìµœì í™”

#### ë°ì´í„°ë² ì´ìŠ¤ ìµœì í™”

```sql
-- ì¸ë±ìŠ¤ ìƒì„±
CREATE INDEX idx_users_approval_status ON users(approval_status);
CREATE INDEX idx_orders_working_date ON orders(working_date);
CREATE INDEX idx_order_items_product_id ON order_items(product_id);

-- ë³µí•© ì¸ë±ìŠ¤
CREATE INDEX idx_orders_user_status ON orders(user_id, status);
```

#### API ìµœì í™”

```typescript
// í˜ì´ì§€ë„¤ì´ì…˜
const { data, error, count } = await supabase
  .from("users")
  .select("*", { count: "exact" })
  .range((page - 1) * limit, page * limit - 1)
  .order("created_at", { ascending: false });

// í•„ìš”í•œ í•„ë“œë§Œ ì„ íƒ
const { data } = await supabase
  .from("users")
  .select("id, company_name, email, approval_status")
  .eq("is_active", true);
```

### ìºì‹± ì „ëµ

#### í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ìºì‹±

```typescript
// React Query ìºì‹±
const { data } = useQuery({
  queryKey: ["users", page, search],
  queryFn: () => fetchUsers({ page, search }),
  staleTime: 5 * 60 * 1000, // 5ë¶„
  cacheTime: 10 * 60 * 1000, // 10ë¶„
});
```

#### ì„œë²„ ì‚¬ì´ë“œ ìºì‹±

```typescript
// Next.js ìºì‹±
export const revalidate = 3600; // 1ì‹œê°„

export async function GET() {
  const data = await fetchData();
  return Response.json(data);
}
```

## ğŸ“Š ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

### ë¡œê¹… ì „ëµ

#### êµ¬ì¡°í™”ëœ ë¡œê¹…

```typescript
// API ë¡œê¹…
export function logApiCall(
  method: string,
  url: string,
  status: number,
  duration: number,
  userId?: string
) {
  console.log(
    JSON.stringify({
      timestamp: new Date().toISOString(),
      level: "info",
      service: "api",
      method,
      url,
      status,
      duration,
      userId,
    })
  );
}

// ì—ëŸ¬ ë¡œê¹…
export function logError(error: Error, context: string, userId?: string) {
  console.error(
    JSON.stringify({
      timestamp: new Date().toISOString(),
      level: "error",
      service: "api",
      context,
      error: {
        message: error.message,
        stack: error.stack,
      },
      userId,
    })
  );
}
```

### ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

#### ë©”íŠ¸ë¦­ ìˆ˜ì§‘

```typescript
// API ì‘ë‹µ ì‹œê°„ ì¸¡ì •
export function measureApiResponse(handler: Function, endpoint: string) {
  return async (request: NextRequest) => {
    const start = performance.now();

    try {
      const response = await handler(request);
      const duration = performance.now() - start;

      logApiCall(request.method, endpoint, response.status, duration);

      return response;
    } catch (error) {
      const duration = performance.now() - start;

      logError(error as Error, endpoint);

      return NextResponse.json(
        { success: false, error: "ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤." },
        { status: 500 }
      );
    }
  };
}
```

### ì•Œë¦¼ ì‹œìŠ¤í…œ

#### ì—ëŸ¬ ì•Œë¦¼

```typescript
// ì‹¬ê°í•œ ì—ëŸ¬ ë°œìƒ ì‹œ ì•Œë¦¼
export async function sendErrorAlert(error: Error, context: string) {
  if (error.message.includes("database") || error.message.includes("auth")) {
    await sendEmail({
      to: "admin@lusso.com",
      subject: "ì‹œìŠ¤í…œ ì˜¤ë¥˜ ì•Œë¦¼",
      body: `
        ì˜¤ë¥˜ ë°œìƒ: ${error.message}
        ì»¨í…ìŠ¤íŠ¸: ${context}
        ì‹œê°„: ${new Date().toISOString()}
      `,
    });
  }
}
```

## ğŸ”„ í™•ì¥ì„± ê³ ë ¤ì‚¬í•­

### ìˆ˜í‰ì  í™•ì¥

#### ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì „í™˜

```mermaid
graph TB
    subgraph "API Gateway"
        A[Load Balancer]
    end

    subgraph "Microservices"
        B[User Service]
        C[Product Service]
        D[Order Service]
        E[Inventory Service]
    end

    subgraph "Shared Services"
        F[Auth Service]
        G[Notification Service]
    end

    A --> B
    A --> C
    A --> D
    A --> E
    B --> F
    C --> F
    D --> F
    E --> F
    B --> G
    C --> G
    D --> G
    E --> G
```

### ë°ì´í„°ë² ì´ìŠ¤ í™•ì¥

#### ìƒ¤ë”© ì „ëµ

```sql
-- ì‚¬ìš©ìë³„ ìƒ¤ë”©
CREATE TABLE users_shard_1 (
  LIKE users INCLUDING ALL
);

CREATE TABLE users_shard_2 (
  LIKE users INCLUDING ALL
);

-- ë‚ ì§œë³„ íŒŒí‹°ì…”ë‹
CREATE TABLE orders_2024_01 PARTITION OF orders
FOR VALUES FROM ('2024-01-01') TO ('2024-02-01');
```

### ìºì‹± ê³„ì¸µ

#### Redis ìºì‹±

```typescript
// Redis ìºì‹± ë ˆì´ì–´
export class CacheService {
  private redis: Redis;

  async get<T>(key: string): Promise<T | null> {
    const value = await this.redis.get(key);
    return value ? JSON.parse(value) : null;
  }

  async set<T>(key: string, value: T, ttl: number = 3600): Promise<void> {
    await this.redis.setex(key, ttl, JSON.stringify(value));
  }

  async invalidate(pattern: string): Promise<void> {
    const keys = await this.redis.keys(pattern);
    if (keys.length > 0) {
      await this.redis.del(...keys);
    }
  }
}
```

## ğŸ“š ê²°ë¡ 

ë£¨ì†Œ ë„ë§¤ ì‹œìŠ¤í…œì€ í˜„ëŒ€ì ì¸ ì›¹ ê¸°ìˆ  ìŠ¤íƒì„ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¶•ëœ í™•ì¥ ê°€ëŠ¥í•˜ê³  ìœ ì§€ë³´ìˆ˜ ê°€ëŠ¥í•œ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### í•µì‹¬ ì„¤ê³„ ì›ì¹™

1. **ëª¨ë“ˆí™”**: ê¸°ëŠ¥ë³„ë¡œ ë¶„ë¦¬ëœ ëª¨ë“ˆ êµ¬ì¡°
2. **í™•ì¥ì„±**: ìˆ˜í‰ì /ìˆ˜ì§ì  í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜
3. **ë³´ì•ˆ**: ë‹¤ì¸µ ë³´ì•ˆ ì •ì±… ì ìš©
4. **ì„±ëŠ¥**: ìµœì í™”ëœ ë°ì´í„° ì²˜ë¦¬ ë° ìºì‹±
5. **ëª¨ë‹ˆí„°ë§**: í¬ê´„ì ì¸ ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§

### í–¥í›„ ê°œì„  ë°©í–¥

1. **ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì „í™˜**: ì„œë¹„ìŠ¤ë³„ ë…ë¦½ ë°°í¬
2. **ì‹¤ì‹œê°„ ì²˜ë¦¬**: WebSocket ê¸°ë°˜ ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
3. **AI/ML í†µí•©**: ì¬ê³  ì˜ˆì¸¡, ì¶”ì²œ ì‹œìŠ¤í…œ
4. **ëª¨ë°”ì¼ ì•±**: React Native ê¸°ë°˜ ëª¨ë°”ì¼ ì•±
5. **ë‹¤êµ­ì–´ ì§€ì›**: i18n ê¸°ë°˜ ë‹¤êµ­ì–´ ì§€ì›

ì´ ì•„í‚¤í…ì²˜ ë¬¸ì„œëŠ” ì‹œìŠ¤í…œì˜ í˜„ì¬ ìƒíƒœë¥¼ ë°˜ì˜í•˜ë©°, ì§€ì†ì ì¸ ê°œì„ ì„ í†µí•´ ë”ìš± ë°œì „ëœ ì‹œìŠ¤í…œìœ¼ë¡œ ì§„í™”í•  ê²ƒì…ë‹ˆë‹¤.
